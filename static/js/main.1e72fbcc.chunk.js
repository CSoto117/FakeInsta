(this.webpackJsonppjfinal=this.webpackJsonppjfinal||[]).push([[0],{33:function(e,t,s){},54:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(16),r=s.n(n),l=(s(33),s(8)),i=s(9),o=s(11),d=s(10),j=s(5),u=s(2),b=s(3),x=s(4),h=(s(34),s(28)),m=s.n(h).a.create({baseURL:"https://posts-pw2021.herokuapp.com/api/v1"});m.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("SecurityToken"),m.defaults.headers.post["Content-Type"]="application/json";var p=m,O=s(1),f=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};p.post("/auth/signin",t).then((function(e){localStorage.setItem("SecurityToken",e.data.token),localStorage.setItem("Role",e.data.role),a.setState({isLogged:!0})})).catch((function(e){e.response&&(Object(x.b)(JSON.stringify(e.response.data.errors)),Object(x.b)(JSON.stringify(e.response.data.error)))}))},a.state={isLogged:!1,username:"",password:""},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return this.state.isLogged?Object(O.jsx)(u.a,{to:"/home",replace:!1}):Object(O.jsxs)("form",{className:"text-white flex flex-col justify-center items-center\r w-80 max-w-screen-sm mx-auto h-screen md:w-auto",onSubmit:this.handleSubmit,children:[Object(O.jsx)(x.a,{}),Object(O.jsxs)("div",{className:"space-y-6",children:[Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"username",children:"Usuario"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800 ",id:"username",type:"text",placeholder:"Usuario",onChange:function(t){return e.setState(Object(b.a)(Object(b.a)({},e.state),{},{username:t.target.value}))}})]}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"password",children:"Contrase\xf1a"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800",id:"password",type:"password",placeholder:"******************",onChange:function(t){return e.setState(Object(b.a)(Object(b.a)({},e.state),{},{password:t.target.value}))}})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("button",{className:"w-full bg-yellow-600 rounded-2xl shadow-xl py-2",type:"submit",children:"Ingresar"})})]})]})}}]),s}(a.Component),g=s(13);var v=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={post:[]},a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=this;p.get("/post/all",{params:{limit:10,page:0}}).then((function(t){e.setState({post:t.data.data})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){return this.props.user?Object(O.jsxs)("div",{className:"mt-20 w-15 lg:-w-24 gap-6 h-full flex flex-col justify-around items-center",children:[Object(O.jsx)(x.a,{}),this.state.post.map((function(e,t){return Object(O.jsxs)("div",{className:"flex flex-col justify-center justify-items-center bg-white rounded-2xl w-1/2 text-black",children:[Object(O.jsx)("div",{className:"p-2 border-b-2",children:Object(O.jsx)("h1",{className:"text-3xl text-center",children:e.title})}),Object(O.jsx)("div",{className:"flex items-center justify-center justify-items-center",children:Object(O.jsx)("img",{className:"object-cover",src:e.image,alt:""})}),Object(O.jsx)("div",{className:"p-2 border-t-2",children:Object(O.jsx)("h2",{className:"text-xs overflow-x-hidden",children:e.description})}),Object(O.jsxs)("div",{className:"w-full border-t-2 grid grid-cols-2 divide-x",children:[Object(O.jsx)("div",{children:Object(O.jsxs)("button",{className:"p-2 w-full hover:bg-gray-200 rounded-bl-2xl",onClick:function(){return t=e._id,void p.patch("/post/like/".concat(t)).then((function(e){Object(x.b)(e.data.message)}));var t},children:["Me Gusta ",Object(O.jsx)("span",{children:Object(O.jsx)(g.c,{className:"mr-0.5 w-8 h-8 mx-0 inline-block align-middle"})})]})}),Object(O.jsx)("div",{children:Object(O.jsxs)("button",{className:"p-2 w-full h-full hover:bg-gray-200 rounded-br-2xl",children:["Comentario ",Object(O.jsx)("span",{children:Object(O.jsx)(g.a,{className:"mr-0.5 w-8 h-8 mx-0 inline-block align-middle"})})]})})]})]},t)}))]}):Object(O.jsx)("h1",{children:"Por favor Iniciar Sesi\xf3n para acceder. "})}}]),s}(a.Component),y=function(e){var t=e.props;return"admin"===localStorage.getItem("Role")?Object(O.jsx)("nav",{className:"fixed top-0 left-0 bg-white w-full shadow",children:Object(O.jsxs)("div",{className:"md:container m-auto flex justify-between items-center text-gray-700",children:[Object(O.jsx)("h1",{className:"pl-8 py-4 text-xl font-bold",children:"Bienvenidos a FakeInsta"}),Object(O.jsxs)("ul",{className:"hidden md:flex items-center pr-10 text-base font-semibold cursor-pointer",children:[Object(O.jsx)(j.b,{to:"/home",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Inicio"})}),Object(O.jsx)(j.b,{to:"/create",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Crear"})}),Object(O.jsx)(j.b,{to:"/ownerPost",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Mis Publicaciones"})}),Object(O.jsx)(j.b,{to:"/close",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Cerrar Sesi\xf3n"})}),Object(O.jsxs)("li",{className:"hover:bg-gray-200 py-4 px-6 flex",children:[Object(O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})," "]}),t]})]})]})}):Object(O.jsx)("nav",{className:"fixed top-0 left-0 bg-white w-full shadow",children:Object(O.jsxs)("div",{className:"md:container m-auto flex justify-between items-center text-gray-700",children:[Object(O.jsx)("h1",{className:"pl-8 py-4 text-xl font-bold",children:"Bienvenidos a FakeInsta"}),Object(O.jsxs)("ul",{className:"hidden md:flex items-center pr-10 text-base font-semibold cursor-pointer",children:[Object(O.jsx)(j.b,{to:"/home",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Inicio"})}),Object(O.jsx)(j.b,{to:"/close",children:Object(O.jsx)("li",{className:"hover:bg-gray-200 py-4 px-6",children:"Cerrar Sesi\xf3n"})}),Object(O.jsxs)("li",{className:"hover:bg-gray-200 py-4 px-6 flex",children:[Object(O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})," "]}),t]})]})]})})},N=function(e){var t=e.props;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(y,{props:t}),Object(O.jsx)("div",{children:Object(O.jsx)(u.b,{})})]})},w=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={title:a.state.title,description:a.state.description,image:a.state.image};p.post("/post/create",t).then((function(e){a.setState({isSuccesfull:!0,returnMessage:e.data.message})})).catch((function(e){e.response&&Object(x.b)(JSON.stringify(e.response.data.errors))}))},a.state={isSuccesfull:!1,title:"",description:"",image:"",returnMessage:""},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return this.props.user&&"admin"===this.props.role?this.state.isSuccesfull?Object(O.jsx)(u.a,{to:"/home",replace:!1}):Object(O.jsxs)("form",{className:"text-white flex flex-col justify-center items-center\r w-80 max-w-screen-sm mx-auto h-screen md:w-auto",onSubmit:this.handleSubmit,children:[Object(O.jsx)(x.a,{}),Object(O.jsxs)("div",{className:"space-y-6",children:[Object(O.jsx)("h1",{children:"Crear Publicaci\xf3n"}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"titulo",children:"T\xedtulo:"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800 ",id:"titulo",type:"text",placeholder:"Ingrese un T\xedtulo...",onChange:function(t){return e.setState(Object(b.a)(Object(b.a)({},e.state),{},{title:t.target.value}))}})]}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"descripcion",children:"Descripci\xf3n:"}),Object(O.jsx)("textarea",{className:"rounded-lg px-2 py-1 text-gray-800",id:"descripcion",placeholder:"Ingrese una Descripci\xf3n...",onChange:function(t){return e.setState(Object(b.a)(Object(b.a)({},e.state),{},{description:t.target.value}))}})]}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"urlImagen",children:"URL de imagen:"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800",id:"urlImagen",type:"url",placeholder:"Ingrese una URL de imagen...",onChange:function(t){return e.setState(Object(b.a)(Object(b.a)({},e.state),{},{image:t.target.value}))}})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("button",{className:"w-full bg-yellow-600 rounded-2xl shadow-xl py-2",type:"submit",children:"Ingresar"})})]})]}):Object(O.jsx)("h1",{children:"Por favor inicie sesi\xf3n"})}}]),s}(a.Component),S=s(17),k=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={post:[],isModify:!1,id:""},a.hide=a.hide.bind(Object(S.a)(a)),a}return Object(i.a)(s,[{key:"hide",value:function(e){p.patch("/post/toggle/".concat(e)).then((function(e){Object(x.b)(e.data.message)}))}},{key:"componentDidMount",value:function(){var e=this;p.get("/post/owned",{params:{limit:15,page:0}}).then((function(t){e.setState({post:t.data.data})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){return this.state.isModify?Object(O.jsx)(u.a,{to:"/update",props:this.state.id,replace:!1}):this.props.user&&"admin"===this.props.role?Object(O.jsxs)("div",{className:"mt-20 w-15 lg:-w-24 gap-6 h-full flex flex-col justify-around items-center",children:[Object(O.jsx)(x.a,{}),this.state.post.map((function(e,t){var s=this;return Object(O.jsxs)("div",{className:"flex flex-col justify-center justify-items-center bg-white rounded-2xl w-1/2 text-black",children:[Object(O.jsx)("div",{className:"p-2 border-b-2",children:Object(O.jsx)("h1",{className:"text-3xl text-center",children:e.title})}),Object(O.jsx)("div",{className:"p-2 border-b-2",children:Object(O.jsxs)("h1",{className:"",children:["Estado: ",e.active?"Visible":"Oculto"]})}),Object(O.jsx)("div",{className:"flex items-center justify-center justify-items-center",children:Object(O.jsx)("img",{className:"object-cover",src:e.image,alt:""})}),Object(O.jsx)("div",{className:"p-2 border-t-2",children:Object(O.jsx)("h2",{className:"text-xs overflow-x-hidden",children:e.description})}),Object(O.jsxs)("div",{className:"w-full border-t-2 grid grid-cols-2 divide-x",children:[Object(O.jsx)("div",{children:Object(O.jsx)(j.b,{to:"/update/".concat(e._id),children:Object(O.jsxs)("button",{className:"p-2 w-full hover:bg-gray-200 rounded-bl-2xl",children:["Modificar ",Object(O.jsx)("span",{children:Object(O.jsx)(g.c,{className:"mr-0.5 w-8 h-8 mx-0 inline-block align-middle"})})]})})}),Object(O.jsx)("div",{children:Object(O.jsxs)("button",{className:"p-2 w-full h-full hover:bg-gray-200 rounded-br-2xl",onClick:function(){return s.hide(e._id)},children:["Ocultar ",Object(O.jsx)("span",{children:Object(O.jsx)(g.b,{className:"mr-0.5 w-8 h-8 mx-0 inline-block align-middle"})})]})})]})]},t)}),this)]}):Object(O.jsx)("h1",{children:"Por favor Iniciar Sesi\xf3n para acceder. "})}}]),s}(a.Component),C=s(12);var I=function(e){var t=e.props,s=Object(a.useState)([]),c=Object(C.a)(s,2),n=c[0],r=c[1],l=Object(a.useState)({title:n.title,description:n.description,image:n.image}),i=Object(C.a)(l,2),o=i[0],d=i[1],j=Object(u.i)().slug;return Object(a.useEffect)((function(){p.get("/post/one/".concat(j)).then((function(e){r(e.data)})).catch((function(e){e.response&&Object(x.b)(JSON.stringify(e.response.data.error))}))}),[o]),t&&"admin"===localStorage.getItem("Role")?Object(O.jsxs)("form",{className:"text-white flex flex-col justify-center items-center w-80 max-w-screen-sm mx-auto h-screen md:w-auto",onSubmit:function(e){p.put("/post/update/".concat(j),o).then((function(e){Object(x.b)(e.data.message)})).catch((function(e){e.response&&Object(x.b)(JSON.stringify(e.response.data.errors))})),e.preventDefault()},children:[Object(O.jsx)(x.a,{}),Object(O.jsxs)("div",{className:"space-y-6",children:[Object(O.jsx)("h1",{children:"Crear Publicaci\xf3n"}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"titulo",children:"T\xedtulo:"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800",name:"title",id:"titulo",type:"text",placeholder:"Ingrese un T\xedtulo...",defaultValue:n.title,onChange:function(e){d(Object(b.a)(Object(b.a)({},o),{},{title:e.target.value}))}})]}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"descripcion",children:"Descripci\xf3n:"}),Object(O.jsx)("textarea",{className:"rounded-lg px-2 py-1 text-gray-800",name:"description",id:"descripcion",placeholder:"Ingrese una Descripci\xf3n...",defaultValue:n.description,onChange:function(e){d(Object(b.a)(Object(b.a)({},o),{},{description:e.target.value}))}})]}),Object(O.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(O.jsx)("label",{className:"text-xl font-medium",htmlFor:"urlImagen",children:"URL de imagen:"}),Object(O.jsx)("input",{className:"rounded-lg px-2 py-1 text-gray-800",name:"image",id:"urlImagen",type:"url",placeholder:"Ingrese una URL de imagen...",defaultValue:n.image,onChange:function(e){d(Object(b.a)(Object(b.a)({},o),{},{image:e.target.value}))}})]}),Object(O.jsx)("div",{className:"",children:Object(O.jsx)("button",{className:"w-full bg-yellow-600 rounded-2xl shadow-xl py-2",type:"submit",children:"Ingresar"})})]})]}):Object(O.jsx)("h1",{children:"Por favor inicie sesi\xf3n"})};var F=function(){return localStorage.clear(),Object(O.jsx)(u.a,{to:"/",replace:!1})},M=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={},a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=this;p.get("/auth/whoami").then((function(t){e.setState({user:t.data.username,role:t.data.role})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){return Object(O.jsx)(j.a,{children:Object(O.jsxs)(u.e,{children:[Object(O.jsxs)(u.c,{element:Object(O.jsx)(N,{props:this.state.user}),children:[Object(O.jsx)(u.c,{path:"/home",element:Object(O.jsx)(v,{user:this.state.user})}),Object(O.jsx)(u.c,{path:"/create",element:Object(O.jsx)(w,{user:this.state.user,role:this.state.role})}),Object(O.jsx)(u.c,{path:"/ownerPost",element:Object(O.jsx)(k,{user:this.state.user,role:this.state.role})}),Object(O.jsx)(u.c,{path:"/update/:slug",element:Object(O.jsx)(I,{props:this.state.user,role:this.state.role})}),Object(O.jsx)(u.c,{path:"/close",element:Object(O.jsx)(F,{user:this.state.user})})]}),Object(O.jsx)(u.c,{path:"/",element:Object(O.jsx)(f,{})})]})})}}]),s}(a.Component),L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,55)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(M,{})}),document.getElementById("root")),L()}},[[54,1,2]]]);
//# sourceMappingURL=main.1e72fbcc.chunk.js.map